---
documentclass: article
title: "Calibration des chocs de capital de solvabilit√© requis avec expected shortfall."
author: "Kevin BAMOUNI"
date: "15/08/2020"
geometry: margin=1in
fontfamily: mathptmx
fontsize: 11pt
lang: fr-FR
# spacing: double
endnote: no
citecolor: cyan
output:
  pdf_document:
    df_print: kable
    fig_width: 7
    fig_height: 4
    fig_caption: true
    citation_package: natbib
    latex_engine: lualatex
bibliography: master.bib
---


CONSERVATOIRE NATIONAL DES ARTS ET METIERS
EFAB
MASTER 2 ACTUARIAT
STA217 STATISTIQUES DU RISQUE


```{r, echo = FALSE, fig.align = 'center', message=FALSE}
# Libraries
library(quantmod)
library(ggplot2)
library(dplyr)
library(cowplot)
```


```{r, echo = FALSE, fig.align = 'center', message=FALSE}
# MSCI data load
msci <- read.csv(file = 'data/MSCI.csv')[ ,c('Date', 'Adj.Close')]
msci$Date <- as.Date(msci$Date)
<<<<<<< HEAD

msci2 <- read.csv(file = 'data/MSCI.csv')[ ,c('Date', 'Adj.Close')]
msci2$Date <- as.Date(msci$Date)
=======
>>>>>>> 11f38574f7794f1e8ba968a4b66734f8cdc0ed8e
```


# INTRODUCTION

Academic workflow, certainly in political science, is at a crossroads. The *American Journal of Political Science* (*AJPS*) announced a (my words) ["show your work" initiative](http://ajps.org/2015/03/26/the-ajps-replication-policy-innovations-and-revisions/) in which authors who are tentatively accepted for publication at the journal must hand over the raw code and data that produced the results shown in the manuscript. The editorial team at *AJPS* then reproduces the code from the manuscript. Pending successful replication, the manuscript moves toward publication. The *AJPS* might be at the fore of this movement, and it could be the most aggressive among political science journals, but other journals in our field have signed the joint [Data Access & Research Transparency](http://www.dartstatement.org/) (DART) initiative. This, at a bare minimum, requires uploading code from quantitatively-oriented published articles to in-house directories hosted by the journal or to services like [Dataverse](http://dataverse.org/). 

# 1. SOLVABILITE 2


# 2. MODELE DE L'ARTICLE : ESPECTED SHORTFALL POUR LA CALIBRATION DES CHOCS DE CALCUL DU SCR (CSR)


## DESCRIPTION


## DONNEES


## CALIBRATION DES CHOCS :


```{r, echo = FALSE, fig.align = 'center', message=FALSE}
# Most basic bubble plot
p1 <- ggplot(msci, aes(x=Date, y=Adj.Close)) +
  geom_area(fill = "lightgray", color="blue") + 
  xlab("Date") + ylab("Price")  + ggtitle("Evolution de la valeur de l'indice MSCI") + theme_classic()

msci_return <-data.frame( diff(log(msci[,'Adj.Close']))[-1]) # formule de calcul : log[Pt] - log[P(t-1)]
colnames(msci_return) <- c("msci_return")

p2 <- ggplot(msci_return, aes(x=index(msci_return), y=msci_return)) +
  geom_line( color="red") + 
  xlab("index") + ylab("return") + ggtitle("Rendement de l'indice MSCI") + theme_classic()

<<<<<<< HEAD
p3 <- ggplot(msci_return, aes(msci_return)) +
  geom_histogram( bins = 100, color="darkgreen", fill="white") +
  xlab("return") + ylab("frequence") + ggtitle("Rendement de l'indice MSCI") +
  theme_classic()

p4 <- ggplot(msci_return, aes(msci_return)) +
  geom_density(color="goldenrod2", fill = "gold1", alpha = 0.1) +
  stat_function(fun = dnorm, args = list(mean(msci_return$msci_return), sd(msci_return$msci_return)), color = "red") +
  geom_vline(xintercept = mean(msci_return$msci_return), colour = "#FF3721", linetype = "dashed") +
  xlab("return") + ylab("frequence") + ggtitle("Rendement de l'indice MSCI") +
  theme_classic()

plot_grid(p1, p2, ncol = 1, align = "v")

plot_grid(p3, p4, labels = c('A', 'B'), label_size = 12)

```



```{r, echo = FALSE, fig.align = 'center', message=FALSE}
quantile(msci_return, probs = c(0, 0.0005, 0.005, 0.01, 0.025, 0.5, 0.975, 0.99, 0.995, 0.9995, 1), na.rm = TRUE, names = TRUE, type = 1)
```
```{r}
qnorm(c(0, 0.0005, 0.005, 0.01, 0.025, 0.5, 0.975, 0.99, 0.995, 0.9995, 1),mean=mean(msci_return$msci_return),sd=sd(msci_return$msci_return))
=======
p3 <- ggplot(msci_return, aes(x=msci_return)) +
  geom_histogram( bins = 100, color="darkgreen", fill="white") +
  stat_function(fun = dnorm, args = list(mean(msci_return$msci_return), sd(msci_return$msci_return))) + 
  xlab("return") + ylab("frequence") + ggtitle("Rendement de l'indice MSCI") + theme_classic()
p3
plot_grid(p1, p2, ncol = 1, align = "v")

```


```{r, echo = FALSE, fig.align = 'center', message=FALSE}
#plot(msci)
#hist(msci, breaks = 100)
>>>>>>> 11f38574f7794f1e8ba968a4b66734f8cdc0ed8e
```



### SCR ACTIONS


### SCR TAUX


### SCR LONGEVITE


# 3. THEORIE DES VALEURS EXTREMES POUR LA CALIBRATION DES CHOCS


# CONCLUSION


# REFERENCES 


# ANNEXES  avec codes, figures en plus etc.).


